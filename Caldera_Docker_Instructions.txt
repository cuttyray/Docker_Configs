# Ubu Docker Install
sudo apt update
sudo apt install apt-transport-https ca-certificates curl software-properties-common
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu focal stable"
apt-cache policy docker-ce
sudo apt install docker-ce
sudo systemctl status docker

# Execute Docker w/o sudo
sudo usermod -aG docker ${USER}
su - ${USER}
groups
sudo usermod -aG docker username

# scp Dockerfile to machine
scp /location/of/file/on/local/Dockerfile [USERNAME]@[DEST_IP]:/home/[USERNAME]/

# In the same directory of the Dockerfile run the following
# w/o OT Plugins
sudo docker build --no-cache --build-arg WIN_BUILD=true -t caldera:latest .
# w/ OT Plugins
docker build --no-cache --build-arg WIN_BUILD=true --build-arg OT_BUILD=true -t caldera:latest .

# To start the container run the following
sudo docker run -d --name calderaserver -p 8888:8888 caldera:latest

# There are three users: red, blue, and admin
# To change their passwords modify the appropriate lines in default.yml or
# change in GUI
# The default password for all is 'admin'

# NOTES
sed -i '/^plugins:/a\- bacnet\n- dnp3\n- modbus' default.yml
